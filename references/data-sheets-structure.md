# 数据表格结构规范

## 目录
1. [菜单表](#菜单表)
2. [订单表](#订单表)
3. [预订表](#预订表)
4. [字段验证规则](#字段验证规则)
5. [初始化示例](#初始化示例)

---

## 菜单表

**表格名称**: `Menu`

**字段定义**:

| 字段名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| 菜品ID | string | 是 | 唯一标识符 | "M001" |
| 名称 | string | 是 | 菜品名称 | "宫保鸡丁" |
| 类别 | string | 是 | 菜品分类（热菜/凉菜/主食/饮料/甜点） | "热菜" |
| 价格 | number | 是 | 单价（元） | 38.00 |
| 描述 | string | 否 | 菜品描述 | "经典川菜，麻辣鲜香" |
| 是否可售 | boolean | 是 | 是否当前可售 | true |
| 图片URL | string | 否 | 菜品图片链接 | "https://..." |

**验证规则**:
- 菜品ID必须唯一，格式为 "M" + 3位数字
- 价格必须大于0
- 类别必须为预定义值之一
- 是否可售为布尔值

**示例数据**:
```
菜品ID,名称,类别,价格,描述,是否可售,图片URL
M001,宫保鸡丁,热菜,38.00,经典川菜，麻辣鲜香,true,
M002,麻婆豆腐,热菜,28.00,嫩滑豆腐，麻辣下饭,true,
M003,凉拌黄瓜,凉菜,15.00,清爽开胃，简单美味,true,
M004,扬州炒饭,主食,25.00,经典扬州风味,true,
M005,可口可乐,饮料,5.00,330ml罐装,true,
M006,提拉米苏,甜点,18.00,意式经典甜品,true,
```

---

## 订单表

**表格名称**: `Orders`

**字段定义**:

| 字段名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| 订单ID | string | 是 | 唯一订单号 | "ORD20250115001" |
| 客户姓名 | string | 是 | 客户姓名 | "张三" |
| 电话号码 | string | 是 | 客户联系电话 | "13800138000" |
| 配送地址 | string | 是 | 配送地址（外卖） | "北京市朝阳区..." |
| 菜品清单 | string | 是 | JSON格式菜品列表 | '[{"菜品ID":"M001","数量":2},{"菜品ID":"M002","数量":1}]' |
| 总金额 | number | 是 | 订单总金额（元） | 104.00 |
| 下单日期 | string | 是 | 下单时间（ISO 8601） | "2025-01-15T12:30:00" |
| 订单状态 | string | 是 | 状态（待确认/制作中/配送中/已完成/已取消） | "待确认" |
| 渠道来源 | string | 是 | 来源渠道（微信/抖音/美团/淘宝/电话） | "微信" |
| 备注 | string | 否 | 订单备注 | "不要香菜" |

**验证规则**:
- 订单ID格式: "ORD" + 日期 + 3位序号
- 电话号码为11位数字
- 配送地址非空（外卖订单）
- 菜品清单为有效JSON数组
- 总金额 = Σ(菜品单价 × 数量)
- 订单状态必须为预定义值之一
- 下单日期符合ISO 8601格式

**示例数据**:
```
订单ID,客户姓名,电话号码,配送地址,菜品清单,总金额,下单日期,订单状态,渠道来源,备注
ORD20250115001,张三,13800138000,北京市朝阳区xx路,"[{""菜品ID"":""M001"",""数量"":2},{""菜品ID"":""M002"",""数量"":1}]",104.00,2025-01-15T12:30:00,待确认,微信,不要香菜
ORD20250115002,李四,13900139000,北京市海淀区xx路,"[{""菜品ID"":""M004"",""数量"":1}]",25.00,2025-01-15T13:00:00,制作中,美团,
```

---

## 预订表

**表格名称**: `Reservations`

**字段定义**:

| 字段名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| 预订ID | string | 是 | 唯一预订号 | "RES20250115001" |
| 客户姓名 | string | 是 | 客户姓名 | "王五" |
| 电话号码 | string | 是 | 客户联系电话 | "13700137000" |
| 预订日期 | string | 是 | 预订日期（YYYY-MM-DD） | "2025-01-20" |
| 时段 | string | 是 | 时间段（如: 18:00-20:00） | "18:00-20:00" |
| 人数 | number | 是 | 就餐人数 | 4 |
| 预订状态 | string | 是 | 状态（待确认/已确认/已取消/已完成） | "已确认" |
| 渠道来源 | string | 是 | 来源渠道（微信/抖音/美团/淘宝/电话） | "电话" |
| 备注 | string | 否 | 预订备注 | "靠窗位置" |
| 创建时间 | string | 是 | 预订创建时间（ISO 8601） | "2025-01-15T10:00:00" |

**验证规则**:
- 预订ID格式: "RES" + 日期 + 3位序号
- 电话号码为11位数字
- 预订日期必须为未来日期
- 时段格式: "HH:MM-HH:MM"
- 人数必须大于0且不大于最大座位数（餐厅配置）
- 同一时段的总人数不超过餐厅容量

**示例数据**:
```
预订ID,客户姓名,电话号码,预订日期,时段,人数,预订状态,渠道来源,备注,创建时间
RES20250115001,王五,13700137000,2025-01-20,18:00-20:00,4,已确认,电话,靠窗位置,2025-01-15T10:00:00
RES20250115002,赵六,13600136000,2025-01-20,19:00-21:00,2,待确认,微信,,2025-01-15T11:00:00
```

---

## 字段验证规则

### 通用规则
1. **电话号码**: 11位数字，以1开头
2. **日期格式**: YYYY-MM-DD 或 ISO 8601完整格式
3. **金额**: 保留两位小数，大于等于0
4. **状态字段**: 必须为预定义值之一，不能为空

### 菜单表特殊规则
- 菜品ID不能重复
- 价格必须大于0
- 是否可售字段默认为true

### 订单表特殊规则
- 订单ID在同一日期内唯一
- 菜品清单JSON必须包含"菜品ID"和"数量"字段
- 订单状态流转: 待确认 → 制作中 → 配送中 → 已完成

### 预订表特殊规则
- 预订ID在同一日期内唯一
- 同一时段的预订总人数不能超过餐厅最大容量
- 预订日期必须是当天或未来日期

---

## 初始化示例

### Google Sheets 创建步骤

1. 创建新的Google Sheet: "餐厅管理系统数据"
2. 创建三个工作表: "Menu", "Orders", "Reservations"
3. 按照上述结构设置表头（第一行）
4. 插入示例数据作为初始记录
5. 分享Sheet给service account账号，设置"编辑者"权限

### Service Account 配置

1. 在Google Cloud Console创建项目
2. 启用Google Sheets API
3. 创建Service Account
4. 下载JSON密钥文件
5. 在Google Sheet中添加service account客户端邮箱为编辑者

### 容量配置

在餐厅运营中需要配置以下参数（通过代码或配置文件管理）:
- 最大座位数（如: 50人）
- 营业时段（如: 11:00-22:00）
- 预订时段长度（如: 2小时）
